window.addEventListener("DOMContentLoaded",(()=>{function e(){KEEP.utils.navItems=document.querySelectorAll(".post-toc-wrap .post-toc li"),KEEP.utils.navItems.length>0?(KEEP.utils={...KEEP.utils,findActiveIndexByTOC(){if(!Array.isArray(KEEP.utils.sections))return;let e=KEEP.utils.sections.findIndex((e=>e&&e.getBoundingClientRect().top-20>0));-1===e?e=KEEP.utils.sections.length-1:e>0&&e--,this.activateNavByIndex(e)},registerSidebarTOC(){KEEP.utils.sections=[...document.querySelectorAll(".post-toc li a.nav-link")].map((e=>{const t=document.getElementById(decodeURI(e.getAttribute("href")).replace("#",""));return e.addEventListener("click",(e=>{e.preventDefault();const o=t.getBoundingClientRect().top+window.scrollY;window.anime({targets:document.scrollingElement,duration:500,easing:"linear",scrollTop:o-10,complete:function(){setTimeout((()=>{KEEP.utils.pageTop_dom.classList.add("hide")}),100)}})})),t}))},activateNavByIndex(e){const t=document.querySelectorAll(".post-toc li a.nav-link")[e];if(!t||t.classList.contains("active-current"))return;document.querySelectorAll(".post-toc .active").forEach((e=>{e.classList.remove("active","active-current")})),t.classList.add("active","active-current");let o=t.parentNode;for(;!o.matches(".post-toc");)o.matches("li")&&o.classList.add("active"),o=o.parentNode;const n=document.querySelector(".post-toc-wrap");window.anime({targets:n,duration:200,easing:"linear",scrollTop:n.scrollTop-n.offsetHeight/2+t.getBoundingClientRect().top-n.getBoundingClientRect().top})},showPageAsideWhenHasTOC(){const e=()=>{const e=KEEP.getStyleStatus(),t="isOpenPageAside";e&&e.hasOwnProperty(t)?KEEP.utils.leftSideToggle.pageAsideHandleOfTOC(e[t]):KEEP.utils.leftSideToggle.pageAsideHandleOfTOC(!0)},t="init_open";KEEP.theme_config.toc.hasOwnProperty(t)?KEEP.theme_config.toc[t]?e():KEEP.utils.leftSideToggle.pageAsideHandleOfTOC(!1):e()}},KEEP.utils.showPageAsideWhenHasTOC(),KEEP.utils.registerSidebarTOC()):KEEP.utils.pageContainer_dom.removeChild(document.querySelector(".page-aside"))}function t(){KEEP.utils.leftSideToggle={toggleBar:document.querySelector(".page-aside-toggle"),pageTopDom:document.querySelector(".page-main-content-top"),containerDom:document.querySelector(".page-container"),leftAsideDom:document.querySelector(".page-aside"),toggleBarIcon:document.querySelector(".page-aside-toggle i"),isOpenPageAside:!1,initToggleBarButton(){this.toggleBar&&this.toggleBar.addEventListener("click",(()=>{this.isOpenPageAside=!this.isOpenPageAside,KEEP.styleStatus.isOpenPageAside=this.isOpenPageAside,KEEP.setStyleStatus(),this.changePageLayoutWhenOpenToggle(this.isOpenPageAside)}))},changePageLayoutWhenOpenToggle(e){this.toggleBarIcon&&(this.toggleBarIcon.className=e?"fas fa-outdent":"fas fa-indent");const t=KEEP.theme_config.style.left_side_width||"260px";this.containerDom.style.paddingLeft=e?t:"0",this.pageTopDom.style.paddingLeft=e?t:"0",this.leftAsideDom.style.left=e?"0":`-${t}`},pageAsideHandleOfTOC(e){this.toggleBar.style.display="flex",this.isOpenPageAside=e,this.changePageLayoutWhenOpenToggle(e)}},KEEP.utils.leftSideToggle.initToggleBarButton()}KEEP.themeInfo={theme:`Keep v${KEEP.theme_config.version}`,author:"XPoet",repository:"https://github.com/XPoet/hexo-theme-keep"},KEEP.localStorageKey="KEEP-THEME-STATUS",KEEP.styleStatus={isExpandPageWidth:!1,isDark:!1,fontSizeLevel:0,isOpenPageAside:!0},KEEP.printThemeInfo=()=>{console.log(`\n %c ${KEEP.themeInfo.theme} %c ${KEEP.themeInfo.repository} \n`,"color: #fadfa3; background: #333; padding: 5px 0;","background: #fadfa3; padding: 5px 0;")},KEEP.setStyleStatus=()=>{localStorage.setItem(KEEP.localStorageKey,JSON.stringify(KEEP.styleStatus))},KEEP.getStyleStatus=()=>{let e=localStorage.getItem(KEEP.localStorageKey);if(e){e=JSON.parse(e);for(let t in KEEP.styleStatus)KEEP.styleStatus[t]=e[t];return e}return null},!0===KEEP.theme_config.pjax.enable&&KEEP.utils?e():window.addEventListener("DOMContentLoaded",e),!0===KEEP.theme_config.pjax.enable&&KEEP.utils?t():window.addEventListener("DOMContentLoaded",t),KEEP.initUtils=()=>{KEEP.utils={html_root_dom:document.querySelector("html"),pageContainer_dom:document.querySelector(".page-container"),pageTop_dom:document.querySelector(".page-main-content-top"),firstScreen_dom:document.querySelector(".first-screen-container"),scrollProgressBar_dom:document.querySelector(".scroll-progress-bar"),pjaxProgressBar_dom:document.querySelector(".pjax-progress-bar"),pjaxProgressIcon_dom:document.querySelector(".pjax-progress-icon"),back2TopButton_dom:document.querySelector(".tool-scroll-to-top"),innerHeight:window.innerHeight,pjaxProgressBarTimer:null,prevScrollValue:0,fontSizeLevel:0,isHasScrollProgressBar:!0===KEEP.theme_config.style.scroll.progress_bar.enable,isHasScrollPercent:!0===KEEP.theme_config.style.scroll.percent.enable,styleHandleWhenScroll(){const e=document.body.scrollTop||document.documentElement.scrollTop,t=document.body.scrollHeight||document.documentElement.scrollHeight,o=window.innerHeight||document.documentElement.clientHeight,n=Math.round(e/(t-o)*100);if(this.isHasScrollProgressBar){const i=(e/(t-o)*100).toFixed(3);this.scrollProgressBar_dom.style.visibility=0===n?"hidden":"visible",this.scrollProgressBar_dom.style.width=`${i}%`}if(this.isHasScrollPercent){const e=this.back2TopButton_dom.querySelector(".percent");0===n||void 0===n?this.back2TopButton_dom.classList.remove("show"):(this.back2TopButton_dom.classList.add("show"),e.innerHTML=n.toFixed(0))}e>this.prevScrollValue&&e>this.innerHeight?this.pageTop_dom.classList.add("hide"):this.pageTop_dom.classList.remove("hide"),this.prevScrollValue=e},registerWindowScroll(){window.addEventListener("scroll",(()=>{(this.isHasScrollPercent||this.isHasScrollProgressBar)&&this.styleHandleWhenScroll(),KEEP.theme_config.toc.enable&&KEEP.utils.hasOwnProperty("findActiveIndexByTOC")&&KEEP.utils.findActiveIndexByTOC(),KEEP.utils.headerShrink.headerShrink()}))},toggleShowToolsList(){document.querySelector(".tool-toggle-show").addEventListener("click",(()=>{document.querySelector(".side-tools-list").classList.toggle("show")}))},globalFontAdjust(){const e=document.defaultView.getComputedStyle(document.body).fontSize,t=parseFloat(e),o=e=>{this.html_root_dom.style.fontSize=t*(1+.05*e)+"px",KEEP.styleStatus.fontSizeLevel=e,KEEP.setStyleStatus()};(()=>{const e=KEEP.getStyleStatus();e&&(this.fontSizeLevel=e.fontSizeLevel,o(this.fontSizeLevel))})(),document.querySelector(".tool-font-adjust-plus").addEventListener("click",(()=>{5!==this.fontSizeLevel&&(this.fontSizeLevel++,o(this.fontSizeLevel))})),document.querySelector(".tool-font-adjust-minus").addEventListener("click",(()=>{this.fontSizeLevel<=0||(this.fontSizeLevel--,o(this.fontSizeLevel))}))},contentAreaWidthAdjust(){const e=document.querySelector(".tool-expand-width"),t=document.querySelector(".header-content"),o=document.querySelector(".main-content"),n=e.querySelector("i"),i=KEEP.theme_config.style.content_max_width||"1000px";let s=i,l=!1;!0===KEEP.theme_config.style.first_screen.enable&&"/"===window.location.pathname&&(s=1.2*parseInt(i)+"px");const r=e=>{KEEP.styleStatus.isExpandPageWidth=e,KEEP.setStyleStatus(),e?(n.classList.remove("fa-arrows-alt-h"),n.classList.add("fa-compress-arrows-alt"),t.style.maxWidth="90%",o.style.maxWidth="90%"):(n.classList.remove("fa-compress-arrows-alt"),n.classList.add("fa-arrows-alt-h"),t.style.maxWidth=s,o.style.maxWidth=i)};(()=>{const e=KEEP.getStyleStatus();e&&(l=e.isExpandPageWidth,r(l))})(),e.addEventListener("click",(()=>{l=!l,r(l)}))},goComment(){this.goComment_dom=document.querySelector(".go-comment"),this.goComment_dom&&this.goComment_dom.addEventListener("click",(()=>{document.querySelector("#comment-anchor").scrollIntoView()}))},getElementHeight(e){const t=document.querySelector(e);return t?t.getBoundingClientRect().height:0},initFirstScreenHeight(){this.firstScreen_dom&&(this.firstScreen_dom.style.height=this.innerHeight+"px")},initPageHeightHandle(){if(this.firstScreen_dom)return;const e=this.getElementHeight(".page-main-content-top")+this.getElementHeight(".page-main-content-middle")+this.getElementHeight(".page-main-content-bottom"),t=window.innerHeight,o=document.querySelector(".page-main-content-bottom");if(e<t){const n=Math.floor(t-e);n>0&&(o.style.marginTop=n-2+"px")}},imageViewer(){let e=!1;const t=(e,t)=>{document.body.style.overflow=t?"hidden":"auto",t?e.classList.add("active"):e.classList.remove("active")},o=document.querySelector(".image-viewer-container"),n=document.querySelector(".image-viewer-container img");o&&o.addEventListener("click",(()=>{e=!1,t(o,e)}));const i=document.querySelectorAll(".markdown-body img");i.length?i.forEach((i=>{i.addEventListener("click",(()=>{e=!0,t(o,e),n.setAttribute("src",i.getAttribute("src"))}))})):this.pageContainer_dom.removeChild(o)},setHowLongAgoLanguage:(e,t)=>t.replace(/%s/g,e),getHowLongAgo(e){const t=KEEP.language_ago,o=Math.floor(e/2592e3/12),n=Math.floor(e/2592e3),i=Math.floor(e/86400/7),s=Math.floor(e/86400),l=Math.floor(e/3600%24),r=Math.floor(e/60%60),a=Math.floor(e%60);return o>0?this.setHowLongAgoLanguage(o,t.year):n>0?this.setHowLongAgoLanguage(n,t.month):i>0?this.setHowLongAgoLanguage(i,t.week):s>0?this.setHowLongAgoLanguage(s,t.day):l>0?this.setHowLongAgoLanguage(l,t.hour):r>0?this.setHowLongAgoLanguage(r,t.minute):a>0?this.setHowLongAgoLanguage(a,t.second):void 0},setHowLongAgoInHome(){},pjaxProgressBarStart(){this.pjaxProgressBarTimer&&clearInterval(this.pjaxProgressBarTimer),this.isHasScrollProgressBar&&this.scrollProgressBar_dom.classList.add("hide"),this.pjaxProgressBar_dom.style.width="0",this.pjaxProgressIcon_dom.classList.add("show");let e=1;this.pjaxProgressBar_dom.classList.add("show"),this.pjaxProgressBar_dom.style.width=e+"%",this.pjaxProgressBarTimer=setInterval((()=>{e+=5,e>99&&(e=99),this.pjaxProgressBar_dom.style.width=e+"%"}),100)},pjaxProgressBarEnd(){this.pjaxProgressBarTimer&&clearInterval(this.pjaxProgressBarTimer),this.pjaxProgressBar_dom.style.width="100%";const e=setTimeout((()=>{this.pjaxProgressBar_dom.classList.remove("show"),this.pjaxProgressIcon_dom.classList.remove("show"),this.isHasScrollProgressBar&&this.scrollProgressBar_dom.classList.remove("hide");const t=setTimeout((()=>{this.pjaxProgressBar_dom.style.width="0",clearTimeout(e),clearTimeout(t)}),200)}),200)}},KEEP.utils.registerWindowScroll(),KEEP.utils.toggleShowToolsList(),KEEP.utils.globalFontAdjust(),KEEP.utils.contentAreaWidthAdjust(),KEEP.utils.goComment(),KEEP.utils.initPageHeightHandle(),KEEP.utils.initFirstScreenHeight(),KEEP.utils.imageViewer(),KEEP.utils.setHowLongAgoInHome()},KEEP.initModeToggle=()=>{KEEP.utils.modeToggle={modeToggleButton_dom:document.querySelector(".tool-dark-light-toggle"),iconDom:document.querySelector(".tool-dark-light-toggle i"),enableLightMode(){document.body.classList.remove("dark-mode"),document.body.classList.add("light-mode"),this.iconDom.className="fas fa-moon",KEEP.styleStatus.isDark=!1,KEEP.setStyleStatus()},enableDarkMode(){document.body.classList.add("dark-mode"),document.body.classList.remove("light-mode"),this.iconDom.className="fas fa-sun",KEEP.styleStatus.isDark=!0,KEEP.setStyleStatus()},isDarkPrefersColorScheme:()=>window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)"),initModeStatus(){const e=KEEP.getStyleStatus();e?e.isDark?this.enableDarkMode():this.enableLightMode():this.isDarkPrefersColorScheme().matches?this.enableDarkMode():this.enableLightMode()},initModeToggleButton(){this.modeToggleButton_dom.addEventListener("click",(()=>{document.body.classList.contains("dark-mode")?this.enableLightMode():this.enableDarkMode()}))},initModeAutoTrigger(){this.isDarkPrefersColorScheme().addEventListener("change",(e=>{e.matches?this.enableDarkMode():this.enableLightMode()}))}},KEEP.utils.modeToggle.initModeStatus(),KEEP.utils.modeToggle.initModeToggleButton(),KEEP.utils.modeToggle.initModeAutoTrigger()},KEEP.initBack2Top=()=>{KEEP.utils={...KEEP.utils,back2BottomButton_dom:document.querySelector(".tool-scroll-to-bottom"),back2top(){const e=setInterval((function(){let t=document.body.scrollTop||document.documentElement.scrollTop,o=t/2;0!==document.body.scrollTop?document.body.scrollTop-=o:document.documentElement.scrollTop-=o,0===t&&clearInterval(e)}),50)},back2Bottom(){let e=document.body.scrollHeight||document.documentElement.scrollHeight,t=document.body.scrollTop||document.documentElement.scrollTop;const o=setInterval((function(){t||(t=10),t=Math.floor(t+t/2),window.scrollTo(0,t),t>=e&&clearInterval(o)}),50)},initBack2Top(){this.back2TopButton_dom.addEventListener("click",(()=>{this.back2top()}))},initBack2Bottom(){this.back2BottomButton_dom.addEventListener("click",(()=>{this.back2Bottom()}))}},KEEP.utils.initBack2Top(),KEEP.utils.initBack2Bottom()},KEEP.initHeaderShrink=()=>{KEEP.utils.headerShrink={headerDom:document.querySelector(".header-wrapper"),isHeaderShrink:!1,init(){this.headerHeight=this.headerDom.getBoundingClientRect().height},headerShrink(){const e=document.body.scrollTop||document.documentElement.scrollTop;!this.isHeaderShrink&&e>this.headerHeight?(this.isHeaderShrink=!0,document.body.classList.add("header-shrink")):this.isHeaderShrink&&e<=this.headerHeight&&(this.isHeaderShrink=!1,document.body.classList.remove("header-shrink"))},toggleHeaderDrawerShow(){const e=[document.querySelector(".window-mask"),document.querySelector(".menu-bar")];!0===KEEP.theme_config.pjax.enable&&e.push(...document.querySelectorAll(".header-drawer .drawer-menu-list .drawer-menu-item")),e.forEach((e=>{e.addEventListener("click",(()=>{document.body.classList.toggle("header-drawer-show")}))}))}},KEEP.utils.headerShrink.init(),KEEP.utils.headerShrink.headerShrink(),KEEP.utils.headerShrink.toggleHeaderDrawerShow()},KEEP.refresh=()=>{KEEP.initUtils(),KEEP.initHeaderShrink(),KEEP.initModeToggle(),KEEP.initBack2Top(),!0===KEEP.theme_config.local_search.enable&&KEEP.initLocalSearch(),!0===KEEP.theme_config.code_copy.enable&&KEEP.initCodeCopy(),!0===KEEP.theme_config.lazyload.enable&&KEEP.initLazyLoad()},function(){let e=window.location.href;/\/Read\/$/.test(e)&&(function(){const e={"投资":"rgb(95, 207, 128,.5)","文学":"rgba(22, 138, 173,.3)","传记":"rgba(255,150,0,.6)","政治":"rgba(229, 107, 111,.3)","社会":"rgba(124, 22, 46,.1)","历史":"rgba(255, 214, 165,.3)","哲学":"rgba(46, 196, 182,.4)","心理学":"rgba(155, 246, 255,.5)",best:"linear-gradient(109.6deg, rgb(214,180,148) 71.8%,rgb(10,5,0)  71.8%)"};document.querySelectorAll("table").forEach((t=>{let o=Array.from(t.querySelectorAll("tbody tr td:nth-child(2)")).map((e=>e.innerText)),n=[...new Set(o)],i={};n.forEach((e=>{i[e]=0})),o.forEach((e=>{i[e]+=1})),i["投资"]+=isNaN(i["投资/行业研究"])?0:i["投资/行业研究"],delete i["投资/行业研究"];let s=Object.keys(i).map((e=>({category:e,number:i[e]})));s.sort(((e,t)=>t.number-e.number));let l=s.slice(0,2),r={};l.forEach((t=>{let o=t.category;r[o]=e[o]})),t.querySelectorAll("tbody tr td:nth-child(2)").forEach((t=>{let o=t.innerText;"投资/行业研究"===o&&(o="投资");let n=r[o],i=t.parentElement,s=i.querySelector("td:last-child");5===s.innerText.trim().length?(s.style.color="gold",n=e.best,i.style.background=n):document.body.clientWidth}))}))}(),document.body.clientWidth<700&&function(){var e;(e=document.getElementById("styles_js"))||((e=document.createElement("style")).type="text/css",e.id="styles_js",document.getElementsByTagName("head")[0].appendChild(e)),e.appendChild(document.createTextNode("\n        .article-content table th:nth-child(1), .article-content table td:nth-child(1), \n        .article-content table th:nth-child(2), .article-content table td:nth-child(2) {\n            display: none;\n        }\n        .article-content table th{\n            text-align:left !important;\n        }\n        .markdown-body > table td, .markdown-body > table th {\n            padding: 5px 2px !important;\n        }\n\n        .article-content table tr{\n            display: flex;\n            justify-content: space-between;\n        }\n\n        .article-content table th:nth-child(3), .article-content table td:nth-child(3){\n            width: 30%;\n        } \n        .article-content table th:nth-child(4), .article-content table td:nth-child(4){\n            width: 50%;\n        }\n        .article-content table th:nth-child(5), .article-content table td:nth-child(5){\n            width: 20%;\n        }\n\n        .article-content table th:nth-child(3), .article-content table td:nth-child(3), \n        .article-content table th:nth-child(3), .article-content table td:nth-child(4),\n        .article-content table th:nth-child(3), .article-content table td:nth-child(5) {\n            overflow: hidden;\n            text-overflow: ellipsis;\n            white-space: nowrap;\n            display: inline-block;\n        }\n\n        .markdown-body > table{\n            display:block;\n        }\n\n        .markdown-body > table > thead,\n        .markdown-body > table > tbody{\n            display: block;\n        }\n    "))}())}(),KEEP.printThemeInfo(),KEEP.refresh()}));