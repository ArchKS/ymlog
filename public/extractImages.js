const fs=require("fs"),path=require("path"),postsDir="_posts/",imgDir="img/",destDir="dest/";function copyImage(s,e){fs.copyFile(s,e,(o=>{o?console.error(`Error copying file ${s} to ${e}: ${o.message}`):console.log(`Copied ${s} to ${e}`)}))}fs.existsSync("dest/")||fs.mkdirSync("dest/"),fs.existsSync(postsDir)||(console.error(`Directory ${postsDir} does not exist.`),process.exit(1)),fs.readdir(postsDir,((s,e)=>{s&&(console.error(`Error reading files from ${postsDir}: ${s.message}`),process.exit(1)),e.forEach((s=>{if(".md"===path.extname(s)){const e=path.join(postsDir,s);fs.readFile(e,"utf8",((e,o)=>{if(e)return void console.error(`Error reading file ${s}: ${e.message}`);const r=/!\[[^\]]*\]\((\/img\/)?([^)]+)\)/g,i=/<img src="\/img\/([^"]+)"/g;let t;for(;null!==(t=r.exec(o));){const s=t[2];copyImage(path.join("img/",s),path.join("dest/",s))}for(;null!==(t=i.exec(o));){const s=t[1];copyImage(path.join("img/",s),path.join("dest/",s))}}))}}))}));